<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API列表 &mdash; baidupcsapi 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="baidupcsapi 0.3.0 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">baidupcsapi 0.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="api">
<span id="id1"></span><h1>API列表<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>错误和异常<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="baidupcsapi.LoginFailed">
<em class="property">exception </em><tt class="descclassname">baidupcsapi.</tt><tt class="descname">LoginFailed</tt><a class="headerlink" href="#baidupcsapi.LoginFailed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="exception">
<dt id="baidupcsapi.CancelledError">
<em class="property">exception </em><tt class="descclassname">baidupcsapi.</tt><tt class="descname">CancelledError</tt><a class="headerlink" href="#baidupcsapi.CancelledError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="pcs">
<h2>PCS类<a class="headerlink" href="#pcs" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="baidupcsapi.PCS">
<em class="property">class </em><tt class="descclassname">baidupcsapi.</tt><tt class="descname">PCS</tt><big>(</big><em>username</em>, <em>password</em>, <em>captcha_callback=None</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="baidupcsapi.PCS.__init__">
<tt class="descclassname">PCS.</tt><tt class="descname">__init__</tt><big>(</big><em>username</em>, <em>password</em>, <em>captcha_callback=None</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>username</strong> (<em>str</em>) &#8211; 百度网盘的用户名</li>
<li><strong>password</strong> (<em>str</em>) &#8211; 百度网盘的密码</li>
<li><strong>captcha_callback</strong> &#8211; <p>验证码的回调函数</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">该函数会获得一个jpeg文件的内容，返回值需为验证码</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id3">
<h2>空间配额信息<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.quota">
<tt class="descclassname">PCS.</tt><tt class="descname">quota</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.quota" title="Permalink to this definition">¶</a></dt>
<dd><p>获得配额信息
:return requests.Response</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;errno&#8221;:0,&#8221;total&#8221;:配额字节数,&#8221;used&#8221;:已使用字节数,&#8221;request_id&#8221;:请求识别号}</p>
</div>
</div></blockquote>
</dd></dl>

</div>
</div>
<div class="section" id="id4">
<h1>基本文件操作<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id5">
<h2>上传单个文件<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.upload">
<tt class="descclassname">PCS.</tt><tt class="descname">upload</tt><big>(</big><em>dir</em>, <em>file_handler</em>, <em>filename</em>, <em>ondup='newcopy'</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.upload" title="Permalink to this definition">¶</a></dt>
<dd><p>上传单个文件（&lt;2G）.</p>
<div class="line-block">
<div class="line">百度PCS服务目前支持最大2G的单个文件上传。</div>
<div class="line">如需支持超大文件（&gt;2G）的断点续传，请参考下面的“分片文件上传”方法。</div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dir</strong> &#8211; <p>网盘中文件的保存路径（不包含文件名）。
必须以 / 开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li>注意本接口的 dir 参数不包含文件名，只包含路径</li>
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</li>
<li><strong>file_handler</strong> (<em>file</em>) &#8211; <p>上传文件对象 。(e.g. <tt class="docutils literal"><span class="pre">open('foobar',</span> <span class="pre">'rb')</span></tt> )</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">注意不要使用 .read() 方法.</p>
</div>
</li>
<li><strong>callback</strong> &#8211; 上传进度回调函数
需要包含 size 和 progress 名字的参数</li>
<li><strong>filename</strong> &#8211; </li>
<li><strong>ondup</strong> &#8211; <p>（可选）</p>
<ul>
<li>&#8216;overwrite&#8217;：表示覆盖同名文件；</li>
<li>&#8216;newcopy&#8217;：表示生成文件副本并进行重命名，命名规则为“
文件名_日期.后缀”。</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response 对象</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;path&#8221;:&#8221;服务器文件路径&#8221;,&#8221;size&#8221;:文件大小,&#8221;ctime&#8221;:创建时间,&#8221;mtime&#8221;:修改时间,&#8221;md5&#8221;:&#8221;文件md5值&#8221;,&#8221;fs_id&#8221;:服务器文件识别号,&#8221;isdir&#8221;:是否为目录,&#8221;request_id&#8221;:请求识别号}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id6">
<h2>分片上传—文件分片及上传<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.upload_tmpfile">
<tt class="descclassname">PCS.</tt><tt class="descname">upload_tmpfile</tt><big>(</big><em>file_handler</em>, <em>callback=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.upload_tmpfile" title="Permalink to this definition">¶</a></dt>
<dd><p>分片上传—文件分片及上传.</p>
<p>百度 PCS 服务支持每次直接上传最大2G的单个文件。</p>
<p>如需支持上传超大文件（&gt;2G），则可以通过组合调用分片文件上传的
<tt class="docutils literal"><span class="pre">upload_tmpfile</span></tt> 方法和 <tt class="docutils literal"><span class="pre">upload_superfile</span></tt> 方法实现：</p>
<ol class="arabic simple">
<li>首先，将超大文件分割为2G以内的单文件，并调用 <tt class="docutils literal"><span class="pre">upload_tmpfile</span></tt>
将分片文件依次上传；</li>
<li>其次，调用 <tt class="docutils literal"><span class="pre">upload_superfile</span></tt> ，完成分片文件的重组。</li>
</ol>
<p>除此之外，如果应用中需要支持断点续传的功能，
也可以通过分片上传文件并调用 <tt class="docutils literal"><span class="pre">upload_superfile</span></tt> 接口的方式实现。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_handler</strong> (<em>file</em>) &#8211; <p>上传文件对象 。(e.g. <tt class="docutils literal"><span class="pre">open('foobar',</span> <span class="pre">'rb')</span></tt> )</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">注意不要使用 .read() 方法.</p>
</div>
</li>
<li><strong>callback</strong> &#8211; 上传进度回调函数
需要包含 size 和 progress 名字的参数</li>
<li><strong>ondup</strong> (<em>str</em>) &#8211; <p>（可选）</p>
<ul>
<li>&#8216;overwrite&#8217;：表示覆盖同名文件；</li>
<li>&#8216;newcopy&#8217;：表示生成文件副本并进行重命名，命名规则为“
文件名_日期.后缀”。</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">这个对象的内容中的 md5 字段为合并文件的凭依</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;md5&#8221;:&#8221;片段的 md5 值&#8221;,&#8221;request_id&#8221;:请求识别号}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id7">
<h2>分片上传—合并分片文件<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.upload_superfile">
<tt class="descclassname">PCS.</tt><tt class="descname">upload_superfile</tt><big>(</big><em>remote_path</em>, <em>block_list</em>, <em>ondup='newcopy'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.upload_superfile" title="Permalink to this definition">¶</a></dt>
<dd><p>分片上传—合并分片文件.</p>
<p>与分片文件上传的 <tt class="docutils literal"><span class="pre">upload_tmpfile</span></tt> 方法配合使用，
可实现超大文件（&gt;2G）上传，同时也可用于断点续传的场景。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>remote_path</strong> &#8211; <p>网盘中文件的保存路径（包含文件名）。
必须以  开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</li>
<li><strong>block_list</strong> (<em>list</em>) &#8211; 子文件内容的 MD5 值列表；子文件至少两个，最多1024个。</li>
<li><strong>ondup</strong> &#8211; <p>（可选）</p>
<ul>
<li>&#8216;overwrite&#8217;：表示覆盖同名文件；</li>
<li>&#8216;newcopy&#8217;：表示生成文件副本并进行重命名，命名规则为“
文件名_日期.后缀”。</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Response 对象</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;path&#8221;:&#8221;服务器文件路径&#8221;,&#8221;size&#8221;:文件大小,&#8221;ctime&#8221;:创建时间,&#8221;mtime&#8221;:修改时间,&#8221;md5&#8221;:&#8221;文件md5值&#8221;,&#8221;fs_id&#8221;:服务器文件识别号,&#8221;isdir&#8221;:是否为目录,&#8221;request_id&#8221;:请求识别号}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id8">
<h2>下载单个文件<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.download">
<tt class="descclassname">PCS.</tt><tt class="descname">download</tt><big>(</big><em>remote_path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.download" title="Permalink to this definition">¶</a></dt>
<dd><p>下载单个文件。</p>
<p>download 接口支持HTTP协议标准range定义，通过指定range的取值可以实现
断点下载功能。 例如：如果在request消息中指定“Range: bytes=0-99”，
那么响应消息中会返回该文件的前100个字节的内容；
继续指定“Range: bytes=100-199”，
那么响应消息中会返回该文件的第二个100字节内容:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Range&#39;</span><span class="p">:</span> <span class="s">&#39;bytes=0-99&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcs</span> <span class="o">=</span> <span class="n">PCS</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcs</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s">&#39;/test_sdk/test.txt&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>remote_path</strong> &#8211; <p>网盘中文件的路径（包含文件名）。
必须以 / 开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">requests.Response 对象</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id9">
<h2>获得文件列表的真实下载地址<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.download_url">
<tt class="descclassname">PCS.</tt><tt class="descname">download_url</tt><big>(</big><em>remote_path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.download_url" title="Permalink to this definition">¶</a></dt>
<dd><p>返回目标文件可用的下载地址</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>remote_path</strong> (<em>str list</em>) &#8211; 每一项代表需要下载的文件路径</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list, 每一项对应一个真实地址<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">使用该方法返回的地址下载需要加HTTP头 user-agent: WindowsBaiduYunGuanJia 或者 user-agent: Mozilla/5.0 referer:http://pan.baidu.com/disk/home</p>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id10">
<h2>创建目录<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.mkdir">
<tt class="descclassname">PCS.</tt><tt class="descname">mkdir</tt><big>(</big><em>remote_path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>为当前用户创建一个目录.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>remote_path</strong> &#8211; <p>网盘中目录的路径，必须以 / 开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Response 对象<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;fs_id&#8221;:服务器文件识别号,&#8221;path&#8221;:&#8221;路径&#8221;,&#8221;ctime&#8221;:创建时间,&#8221;mtime&#8221;:修改时间,&#8221;status&#8221;:0,&#8221;isdir&#8221;:1,&#8221;errno&#8221;:0,&#8221;name&#8221;:&#8221;文件路径&#8221;}</p>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id11">
<h2>重命名文件(夹)<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.rename">
<tt class="descclassname">PCS.</tt><tt class="descname">rename</tt><big>(</big><em>rename_pair_list</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>重命名</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rename_pair_list</strong> (<em>list</em>) &#8211; 需要重命名的文件(夹)pair （路径，新名称）列表,如[(&#8216;/aa.txt&#8217;,&#8217;bb.txt&#8217;)]</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id12">
<h2>获取目录下的文件列表<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.list_files">
<tt class="descclassname">PCS.</tt><tt class="descname">list_files</tt><big>(</big><em>remote_path</em>, <em>by='name'</em>, <em>order='desc'</em>, <em>limit=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.list_files" title="Permalink to this definition">¶</a></dt>
<dd><p>获取目录下的文件列表.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>remote_path</strong> &#8211; <p>网盘中目录的路径，必须以 / 开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</li>
<li><strong>by</strong> &#8211; <p>排序字段，缺省根据文件类型排序：</p>
<ul>
<li>time（修改时间）</li>
<li>name（文件名）</li>
<li>size（大小，注意目录无大小）</li>
</ul>
</li>
<li><strong>order</strong> &#8211; <p>“asc”或“desc”，缺省采用降序排序。</p>
<ul>
<li>asc（升序）</li>
<li>desc（降序）</li>
</ul>
</li>
<li><strong>limit</strong> &#8211; <p>返回条目控制，参数格式为：n1-n2。</p>
<p>返回结果集的[n1, n2)之间的条目，缺省返回所有条目；
n1从0开始。</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response 对象</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<dl class="docutils">
<dt>{</dt>
<dd><p class="first">&#8220;errno&#8221;:0,
&#8220;list&#8221;:[</p>
<blockquote>
<div><dl class="docutils">
<dt>{&#8220;fs_id&#8221;:服务器文件识别号&#8221;path&#8221;:&#8221;路径&#8221;,&#8221;server_filename&#8221;:&#8221;服务器文件名（不汗含路径）&#8221;,&#8221;size&#8221;:文件大小,&#8221;server_mtime&#8221;:服务器修改时间,&#8221;server_ctime&#8221;:服务器创建时间,&#8221;local_mtime&#8221;:本地修改时间,&#8221;local_ctime&#8221;:本地创建时间,&#8221;isdir&#8221;:是否是目录,&#8221;category&#8221;:类型,&#8221;md5&#8221;:&#8221;md5值&#8221;}……等等</dt>
<dd><p class="first last">],</p>
</dd>
</dl>
</div></blockquote>
<p class="last">&#8220;request_id&#8221;:请求识别号</p>
</dd>
</dl>
<p class="last">}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id13">
<h2>移动文件/目录<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.move">
<tt class="descclassname">PCS.</tt><tt class="descname">move</tt><big>(</big><em>path_list</em>, <em>dest</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.move" title="Permalink to this definition">¶</a></dt>
<dd><p>移动文件或文件夹</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path_list</strong> (<em>list</em>) &#8211; 在百度盘上要移动的源文件path</li>
<li><strong>dest</strong> (<em>str</em>) &#8211; 要移动到的目录</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id14">
<h2>拷贝文件/目录<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.copy">
<tt class="descclassname">PCS.</tt><tt class="descname">copy</tt><big>(</big><em>path_list</em>, <em>dest</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>复制文件或文件夹</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path_list</strong> (<em>list</em>) &#8211; 在百度盘上要复制的源文件path</li>
<li><strong>dest</strong> (<em>str</em>) &#8211; 要复制到的目录</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id15">
<h2>删除文件/目录<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.delete">
<tt class="descclassname">PCS.</tt><tt class="descname">delete</tt><big>(</big><em>path_list</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>删除文件或文件夹</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path_list</strong> (<em>list</em>) &#8211; 待删除的文件或文件夹列表,每一项为服务器路径</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="id16">
<h1>高级功能<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h1>
<div class="section" id="meta-info">
<h2>获取文件meta info<a class="headerlink" href="#meta-info" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.meta">
<tt class="descclassname">PCS.</tt><tt class="descname">meta</tt><big>(</big><em>file_list</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>获得文件(s)的metainfo</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_list</strong> (<em>list</em>) &#8211; 文件路径列表,如 [&#8216;/aaa.txt&#8217;]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">requests.Response
.. note ::
示例<ul class="simple">
<li>文件不存在</li>
</ul>
<p>{&#8220;errno&#8221;:12,&#8221;info&#8221;:[{&#8220;errno&#8221;:-9}],&#8221;request_id&#8221;:3294861771}</p>
<ul class="simple">
<li>文件存在</li>
</ul>
<dl class="docutils">
<dt>{</dt>
<dd>&#8220;errno&#8221;: 0,<p>&#8220;info&#8221;: [</p>
<blockquote>
<div>{<blockquote>
<div>&#8220;fs_id&#8221;: 文件id,<p>&#8220;path&#8221;: &#8220;/u5c0fu7c73/mi2su5237recovery.rar&#8221;,</p>
<p>&#8220;server_filename&#8221;: &#8220;mi2su5237recovery.rar&#8221;,</p>
<p>&#8220;size&#8221;: 8292134,</p>
<p>&#8220;server_mtime&#8221;: 1391274570,</p>
<p>&#8220;server_ctime&#8221;: 1391274570,</p>
<p>&#8220;local_mtime&#8221;: 1391274570,</p>
<p>&#8220;local_ctime&#8221;: 1391274570,</p>
<p>&#8220;isdir&#8221;: 0,</p>
<p>&#8220;category&#8221;: 6,</p>
<p>&#8220;path_md5&#8221;: 279827390796736883,</p>
<p>&#8220;delete_fs_id&#8221;: 0,</p>
<p>&#8220;object_key&#8221;: &#8220;84221121-2193956150-1391274570512754&#8221;,</p>
<dl class="docutils">
<dt>&#8220;block_list&#8221;: [</dt>
<dd>&#8220;76b469302a02b42fd0a548f1a50dd8ac&#8221;</dd>
</dl>
<p>],</p>
<p>&#8220;md5&#8221;: &#8220;76b469302a02b42fd0a548f1a50dd8ac&#8221;,</p>
<p>&#8220;errno&#8221;: 0</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>],</p>
<p class="last">&#8220;request_id&#8221;: 2964868977</p>
</dd>
</dl>
<p>}</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id17">
<h2>获取文件的块差异列表<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.check_file_blocks">
<tt class="descclassname">PCS.</tt><tt class="descname">check_file_blocks</tt><big>(</big><em>path</em>, <em>size</em>, <em>block_list</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.check_file_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>文件块检查</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> &#8211; 文件路径</li>
<li><strong>size</strong> &#8211; 文件大小</li>
<li><strong>block_list</strong> (<em>list</em>) &#8211; 文件块的列表,注意按文件块顺序</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">如果服务器不存在path的文件，则返回中的block_list会等于提交的block_list</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">requests.Response
.. note:<div class="highlight-python"><div class="highlight"><pre>返回示例
{
    &quot;errno&quot;: 0,
    &quot;path&quot;: &quot;/18.rar&quot;,
    &quot;request_id&quot;: 2462633013,
    &quot;block_list&quot;: [
        &quot;8da0ac878f3702c0768dc6ea6820d3ff&quot;,
        &quot;3c1eb99b0e64993f38cd8317788a8855&quot;
    ]
}

其中block_list是需要上传的块的MD5
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id18">
<h2>获取缩略图<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.thumbnail">
<tt class="descclassname">PCS.</tt><tt class="descname">thumbnail</tt><big>(</big><em>path</em>, <em>height</em>, <em>width</em>, <em>quality=100</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>获取文件缩略图</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> &#8211; 远程文件路径</li>
<li><strong>height</strong> &#8211; 缩略图高</li>
<li><strong>width</strong> &#8211; 缩略图宽</li>
<li><strong>quality</strong> &#8211; 缩略图质量，默认100</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">如果返回 HTTP 404 说明该文件不存在缩略图形式</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id19">
<h2>搜索文件<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.search">
<tt class="descclassname">PCS.</tt><tt class="descname">search</tt><big>(</big><em>path</em>, <em>keyword</em>, <em>page=1</em>, <em>recursion=1</em>, <em>limit=1000</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.search" title="Permalink to this definition">¶</a></dt>
<dd><p>搜索文件</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> &#8211; 搜索目录</li>
<li><strong>keyword</strong> &#8211; 关键词</li>
<li><strong>page</strong> &#8211; 返回第几页的数据</li>
<li><strong>recursion</strong> &#8211; 是否递归搜索，默认为1 （似乎0和1都没影响，都是递归搜索的）</li>
<li><strong>limit</strong> &#8211; 每页条目</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">requests.Repsonse</p>
</td>
</tr>
</tbody>
</table>
<p>返回结果和list_files一样结构</p>
</dd></dl>

</div>
<div class="section" id="id20">
<h2>秒传（看服务器是否已存在该文件）<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.rapidupload">
<tt class="descclassname">PCS.</tt><tt class="descname">rapidupload</tt><big>(</big><em>file_handler</em>, <em>path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.rapidupload" title="Permalink to this definition">¶</a></dt>
<dd><p>秒传一个文件</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_handler</strong> (<em>file</em>) &#8211; 文件handler, e.g. open(&#8216;file&#8217;,&#8217;rb&#8217;)</li>
<li><strong>path</strong> (<em>str</em>) &#8211; 上传到服务器的路径，包含文件名</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="simple">
<li>文件已在服务器上存在，不上传，返回示例</li>
</ul>
<p>{</p>
<blockquote>
<div><p>&#8220;path&#8221; : &#8220;/apps/album/1.jpg&#8221;,</p>
<p>&#8220;size&#8221; : 372121,</p>
<p>&#8220;ctime&#8221; : 1234567890,</p>
<p>&#8220;mtime&#8221; : 1234567890,</p>
<p>&#8220;md5&#8221; : &#8220;cb123afcc12453543ef&#8221;,</p>
<p>&#8220;fs_id&#8221; : 12345,</p>
<p>&#8220;isdir&#8221; : 0,</p>
<p>&#8220;request_id&#8221; : 12314124</p>
</div></blockquote>
<p>}</p>
<ul class="simple">
<li>文件不存在，需要上传</li>
</ul>
<p>{&#8220;errno&#8221;:404,&#8221;info&#8221;:[],&#8221;request_id&#8221;:XXX}</p>
<ul class="simple">
<li>文件大小不足 256kb （slice-md5 == content-md5) 时</li>
</ul>
<p>{&#8220;errno&#8221;:2,&#8221;info&#8221;:[],&#8221;request_id&#8221;:XXX}</p>
<ul class="simple">
<li>远程文件已存在</li>
</ul>
<p class="last">{&#8220;errno&#8221;:-8,&#8221;info&#8221;:[],&#8221;request_id&#8221;:XXX}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id21">
<h2>获取流式文件列表<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.list_streams">
<tt class="descclassname">PCS.</tt><tt class="descname">list_streams</tt><big>(</big><em>file_type</em>, <em>start=0</em>, <em>limit=1000</em>, <em>order='time'</em>, <em>desc='1'</em>, <em>filter_path=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.list_streams" title="Permalink to this definition">¶</a></dt>
<dd><p>以视频、音频、图片及文档四种类型的视图获取所创建应用程序下的
文件列表.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_type</strong> &#8211; 类型分为video audio image doc other exe torrent</li>
<li><strong>start</strong> &#8211; 返回条目控制起始值，缺省值为0。</li>
<li><strong>limit</strong> &#8211; 返回条目控制长度，缺省为1000，可配置。</li>
<li><strong>filter_path</strong> &#8211; <p>需要过滤的前缀路径，如：/album</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">requests.Response 对象, 结构和 list_files 相同</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id22">
<h2>获得流式文件播放地址<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.get_streaming">
<tt class="descclassname">PCS.</tt><tt class="descname">get_streaming</tt><big>(</big><em>path</em>, <em>stype='M3U8_AUTO_480'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.get_streaming" title="Permalink to this definition">¶</a></dt>
<dd><p>获得视频的m3u8列表</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> &#8211; 视频文件路径</li>
<li><strong>type</strong> &#8211; <p>返回stream类型, 已知有``M3U8_AUTO_240``/<tt class="docutils literal"><span class="pre">M3U8_AUTO_480</span></tt>/<tt class="docutils literal"><span class="pre">M3U8_AUTO_720</span></tt></p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">M3U8_AUTO_240会有问题, 目前480P是最稳定的, 也是百度网盘默认的</p>
</div>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">str 播放(列表)需要的信息</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id23">
<h2>下载流式文件<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt>
<tt class="descclassname">PCS.</tt><tt class="descname">download</tt><big>(</big><em>remote_path</em>, <em>**kwargs</em><big>)</big></dt>
<dd><p>下载单个文件。</p>
<p>download 接口支持HTTP协议标准range定义，通过指定range的取值可以实现
断点下载功能。 例如：如果在request消息中指定“Range: bytes=0-99”，
那么响应消息中会返回该文件的前100个字节的内容；
继续指定“Range: bytes=100-199”，
那么响应消息中会返回该文件的第二个100字节内容:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;Range&#39;</span><span class="p">:</span> <span class="s">&#39;bytes=0-99&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcs</span> <span class="o">=</span> <span class="n">PCS</span><span class="p">(</span><span class="s">&#39;username&#39;</span><span class="p">,</span><span class="s">&#39;password&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcs</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s">&#39;/test_sdk/test.txt&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>remote_path</strong> &#8211; <p>网盘中文件的路径（包含文件名）。
必须以 / 开头。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">requests.Response 对象</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id24">
<h2>分享文件或文件夹<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.share">
<tt class="descclassname">PCS.</tt><tt class="descname">share</tt><big>(</big><em>file_ids</em>, <em>pwd=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.share" title="Permalink to this definition">¶</a></dt>
<dd><p>创建一个文件的分享链接</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>file_ids</strong> &#8211; 要分享的文件fid列表</li>
<li><strong>pwd</strong> (<em>str</em>) &#8211; 分享密码，没有则没有密码</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response 对象</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>返回正确</dt>
<dd><dl class="first docutils">
<dt>{</dt>
<dd><p class="first">&#8220;errno&#8221;: 0,</p>
<p>&#8220;request_id&#8221;: 请求识别号,</p>
<p>&#8220;shareid&#8221;: 分享识别号,</p>
<p>&#8220;link&#8221;: &#8220;分享地址&#8221;,</p>
<p>&#8220;shorturl&#8221;: &#8220;段网址&#8221;,</p>
<p>&#8220;ctime&#8221;: 创建时间,</p>
<p class="last">&#8220;premis&#8221;: false</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="id25">
<h1>离线下载<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id26">
<h2>添加离线下载任务<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.add_download_task">
<tt class="descclassname">PCS.</tt><tt class="descname">add_download_task</tt><big>(</big><em>source_url</em>, <em>remote_path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.add_download_task" title="Permalink to this definition">¶</a></dt>
<dd><p>添加离线任务</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>source_url</strong> (<em>str</em>) &#8211; <p>下载的地址,不可以是 magnet 协议</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">需要支持 <tt class="docutils literal"><span class="pre">magnet</span></tt> 地址可以在本地使用 <tt class="docutils literal"><span class="pre">magnet</span></tt> 地址生成种子文件后调用 <strong>add_local_bt_task</strong></p>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="torrent">
<h2>添加本地torrent<a class="headerlink" href="#torrent" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.add_local_bt_task">
<tt class="descclassname">PCS.</tt><tt class="descname">add_local_bt_task</tt><big>(</big><em>torrent_path</em>, <em>save_path='/'</em>, <em>selected_idx=0</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.add_local_bt_task" title="Permalink to this definition">¶</a></dt>
<dd><p>添加本地BT任务</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>torrent_path</strong> &#8211; 本地种子的路径</li>
<li><strong>save_path</strong> &#8211; 远程保存路径</li>
<li><strong>selected_idx</strong> &#8211; 要下载的文件序号，0为所有，默认为0</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p class="last">{&#8220;task_id&#8221;:任务编号,&#8221;rapid_download&#8221;:是否已经完成（急速下载）,&#8221;request_id&#8221;:请求识别号}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id27">
<h2>获取离线任务总数<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.download_tasks_number">
<tt class="descclassname">PCS.</tt><tt class="descname">download_tasks_number</tt><big>(</big><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.download_tasks_number" title="Permalink to this definition">¶</a></dt>
<dd><p>获取离线任务总数</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id28">
<h2>精确查询离线下载任务<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.query_download_tasks">
<tt class="descclassname">PCS.</tt><tt class="descname">query_download_tasks</tt><big>(</big><em>task_ids</em>, <em>operate_type=1</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.query_download_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>根据任务ID号，查询离线下载任务信息及进度信息。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>task_ids</strong> (<em>list or tuple</em>) &#8211; 要查询的任务 ID字符串 列表</li>
<li><strong>operate_type</strong> &#8211; <ul>
<li>0：查任务信息</li>
<li>1：查进度信息，默认为1</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<p>给出一个范例</p>
<dl class="docutils">
<dt>{</dt>
<dd><dl class="first last docutils">
<dt>&#8220;task_info&#8221;:</dt>
<dd><dl class="first docutils">
<dt>{&#8220;70970481&#8221;:{</dt>
<dd><p class="first">&#8220;status&#8221;:&#8221;0&#8221;,</p>
<p>&#8220;file_size&#8221;:&#8221;122328178&#8221;,</p>
<p>&#8220;finished_size&#8221;:&#8221;122328178&#8221;,</p>
<p>&#8220;create_time&#8221;:&#8221;1391620757&#8221;,</p>
<p>&#8220;start_time&#8221;:&#8221;1391620757&#8221;,</p>
<p>&#8220;finish_time&#8221;:&#8221;1391620757&#8221;,</p>
<p>&#8220;save_path&#8221;:&#8221;/&#8221;,</p>
<p>&#8220;source_url&#8221;:&#8221;/saki-nation04gbcn.torrent&#8221;,</p>
<p>&#8220;task_name&#8221;:&#8221;[KTXP][Saki-National][04][GB_CN][720p]&#8221;,</p>
<p>&#8220;od_type&#8221;:&#8221;2&#8221;,</p>
<dl class="docutils">
<dt>&#8220;file_list&#8221;:[</dt>
<dd><dl class="first docutils">
<dt>{</dt>
<dd><p class="first">&#8220;file_name&#8221;:&#8221;[KTXP][Saki-National][04][GB_CN][720p].mp4&#8221;,</p>
<p class="last">&#8220;file_size&#8221;:&#8221;122328178&#8221;</p>
</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
<p>],</p>
<p>&#8220;result&#8221;:0</p>
<p class="last">}</p>
</dd>
</dl>
<p>},</p>
<p class="last">&#8220;request_id&#8221;:861570268</p>
</dd>
</dl>
</dd>
</dl>
<p class="last">}</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id29">
<h2>查询离线下载任务列表<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.list_download_tasks">
<tt class="descclassname">PCS.</tt><tt class="descname">list_download_tasks</tt><big>(</big><em>need_task_info='1'</em>, <em>asc='0'</em>, <em>start=0</em>, <em>create_time=None</em>, <em>limit=1000</em>, <em>status='255'</em>, <em>source_url=None</em>, <em>remote_path=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.list_download_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>查询离线下载任务ID列表及任务信息.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>need_task_info</strong> &#8211; 是否需要返回任务信息:
* 0：不需要
* 1：需要，默认为1</li>
<li><strong>start</strong> &#8211; 查询任务起始位置，默认为0。</li>
<li><strong>limit</strong> &#8211; 设定返回任务数量，默认为10。</li>
<li><strong>asc</strong> &#8211; <ul>
<li>0：降序，默认值</li>
<li>1：升序</li>
</ul>
</li>
<li><strong>create_time</strong> (<em>int</em>) &#8211; 任务创建时间，默认为空。</li>
<li><strong>status</strong> (<em>int</em>) &#8211; <p>任务状态，默认为空。</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>任务状态有</dt>
<dd>0:下载成功<p>1:下载进行中</p>
<p>2:系统错误</p>
<p>3:资源不存在</p>
<p>4:下载超时</p>
<p>5:资源存在但下载失败</p>
<p>6:存储空间不足</p>
<p class="last">7:目标地址数据已存在, 8:任务取消.</p>
</dd>
</dl>
</div>
</li>
<li><strong>source_url</strong> &#8211; 源地址URL，默认为空。</li>
<li><strong>remote_path</strong> &#8211; <p>文件保存路径，默认为空。</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last">
<li>路径长度限制为1000；</li>
<li>径中不能包含以下字符：<tt class="docutils literal"><span class="pre">\\</span> <span class="pre">?</span> <span class="pre">|</span> <span class="pre">&quot;</span> <span class="pre">&gt;</span> <span class="pre">&lt;</span> <span class="pre">:</span> <span class="pre">*</span></tt>；</li>
<li>文件名或路径名开头结尾不能是 <tt class="docutils literal"><span class="pre">.</span></tt>
或空白字符，空白字符包括：
<tt class="docutils literal"><span class="pre">\r,</span> <span class="pre">\n,</span> <span class="pre">\t,</span> <span class="pre">空格,</span> <span class="pre">\0,</span> <span class="pre">\x0B</span></tt> 。</li>
</ul>
</div>
</li>
<li><strong>expires</strong> (<em>int</em>) &#8211; 请求失效时间，如果有，则会校验。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>Response 对象</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>返回正确时返回的 Reponse 对象 content 中的数据结构</p>
<blockquote class="last">
<div><dl class="docutils">
<dt>{</dt>
<dd><p class="first">&#8220;task_info&#8221;: [</p>
<blockquote>
<div><p>{</p>
<blockquote>
<div><p>&#8220;task_id&#8221;: &#8220;任务识别号&#8221;,</p>
<p>&#8220;od_type&#8221;: &#8220;2&#8221;,</p>
<p>&#8220;source_url&#8221;: &#8220;原地址，bt任务为种子在服务器上的路径，否则为原始URL&#8221;,</p>
<p>&#8220;save_path&#8221;: &#8220;保存路径&#8221;,</p>
<p>&#8220;rate_limit&#8221;: &#8220;速度限制，0为不限&#8221;,</p>
<p>&#8220;timeout&#8221;: &#8220;0&#8221;,</p>
<p>&#8220;callback&#8221;: &#8220;&#8221;,</p>
<p>&#8220;status&#8221;: &#8220;任务状态&#8221;,</p>
<p>&#8220;create_time&#8221;: &#8220;创建时间&#8221;,</p>
<p>&#8220;task_name&#8221;: &#8220;任务名&#8221;</p>
</div></blockquote>
<p>},……等等</p>
</div></blockquote>
<p>],</p>
<p>&#8220;total&#8221;: 总数,</p>
<p class="last">&#8220;request_id&#8221;: 请求识别号</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id30">
<h2>取消离线下载任务<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.cancel_download_task">
<tt class="descclassname">PCS.</tt><tt class="descname">cancel_download_task</tt><big>(</big><em>task_id</em>, <em>expires=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.cancel_download_task" title="Permalink to this definition">¶</a></dt>
<dd><p>取消离线下载任务.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>task_id</strong> (<em>str</em>) &#8211; 要取消的任务ID号。</li>
<li><strong>expires</strong> (<em>int</em>) &#8211; 请求失效时间，如果有，则会校验。</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">requests.Response</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id31">
<h2>获得百度网盘里种子信息<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.get_remote_file_info">
<tt class="descclassname">PCS.</tt><tt class="descname">get_remote_file_info</tt><big>(</big><em>remote_path</em>, <em>type='2'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.get_remote_file_info" title="Permalink to this definition">¶</a></dt>
<dd><p>获得百度网盘里种子的信息</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>remote_path</strong> (<em>str</em>) &#8211; 种子文件在网盘里的绝对路径</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">requests.Response</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="id32">
<h1>回收站<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id33">
<h2>查询回收站文件<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.list_recycle_bin">
<tt class="descclassname">PCS.</tt><tt class="descname">list_recycle_bin</tt><big>(</big><em>order='time'</em>, <em>desc='1'</em>, <em>start=0</em>, <em>limit=1000</em>, <em>page=1</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.list_recycle_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>获取回收站中的文件及目录列表.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> &#8211; 返回条目的起始值，缺省值为0</li>
<li><strong>limit</strong> &#8211; 返回条目的长度，缺省值为1000</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>requests.Response</p>
<p>格式同 list_files</p>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id34">
<h2>还原文件或目录<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.restore_recycle_bin">
<tt class="descclassname">PCS.</tt><tt class="descname">restore_recycle_bin</tt><big>(</big><em>fs_ids</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.restore_recycle_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>批量还原文件或目录（非强一致接口，调用后请sleep1秒 ）.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fs_ids</strong> (<em>list or tuple</em>) &#8211; 所还原的文件或目录在 PCS 的临时唯一标识 ID 的列表。</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">requests.Response 对象</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id35">
<h2>清空回收站<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="baidupcsapi.PCS.clean_recycle_bin">
<tt class="descclassname">PCS.</tt><tt class="descname">clean_recycle_bin</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#baidupcsapi.PCS.clean_recycle_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>清空回收站.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">requests.Response</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">API列表</a><ul>
<li><a class="reference internal" href="#id2">错误和异常</a></li>
<li><a class="reference internal" href="#pcs">PCS类</a></li>
<li><a class="reference internal" href="#id3">空间配额信息</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">基本文件操作</a><ul>
<li><a class="reference internal" href="#id5">上传单个文件</a></li>
<li><a class="reference internal" href="#id6">分片上传—文件分片及上传</a></li>
<li><a class="reference internal" href="#id7">分片上传—合并分片文件</a></li>
<li><a class="reference internal" href="#id8">下载单个文件</a></li>
<li><a class="reference internal" href="#id9">获得文件列表的真实下载地址</a></li>
<li><a class="reference internal" href="#id10">创建目录</a></li>
<li><a class="reference internal" href="#id11">重命名文件(夹)</a></li>
<li><a class="reference internal" href="#id12">获取目录下的文件列表</a></li>
<li><a class="reference internal" href="#id13">移动文件/目录</a></li>
<li><a class="reference internal" href="#id14">拷贝文件/目录</a></li>
<li><a class="reference internal" href="#id15">删除文件/目录</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id16">高级功能</a><ul>
<li><a class="reference internal" href="#meta-info">获取文件meta info</a></li>
<li><a class="reference internal" href="#id17">获取文件的块差异列表</a></li>
<li><a class="reference internal" href="#id18">获取缩略图</a></li>
<li><a class="reference internal" href="#id19">搜索文件</a></li>
<li><a class="reference internal" href="#id20">秒传（看服务器是否已存在该文件）</a></li>
<li><a class="reference internal" href="#id21">获取流式文件列表</a></li>
<li><a class="reference internal" href="#id22">获得流式文件播放地址</a></li>
<li><a class="reference internal" href="#id23">下载流式文件</a></li>
<li><a class="reference internal" href="#id24">分享文件或文件夹</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id25">离线下载</a><ul>
<li><a class="reference internal" href="#id26">添加离线下载任务</a></li>
<li><a class="reference internal" href="#torrent">添加本地torrent</a></li>
<li><a class="reference internal" href="#id27">获取离线任务总数</a></li>
<li><a class="reference internal" href="#id28">精确查询离线下载任务</a></li>
<li><a class="reference internal" href="#id29">查询离线下载任务列表</a></li>
<li><a class="reference internal" href="#id30">取消离线下载任务</a></li>
<li><a class="reference internal" href="#id31">获得百度网盘里种子信息</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32">回收站</a><ul>
<li><a class="reference internal" href="#id33">查询回收站文件</a></li>
<li><a class="reference internal" href="#id34">还原文件或目录</a></li>
<li><a class="reference internal" href="#id35">清空回收站</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">baidupcsapi 0.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, latyas,mozillazg.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>